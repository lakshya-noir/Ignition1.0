{% extends "layout.html" %}
{% block content %}
<div class="card mx-auto shadow p-5 animate-fadeInUp" style="max-width:800px;">
  <h3 class="text-center mb-2" style="color: #FF6B35; font-size: 2.5rem;">Upload Your Project</h3>
  <p class="text-center mb-4" style="color: #FFD580;">Team: <strong style="color: #FFFFFF;">{{ team }}</strong></p>

  {% if error %}
  <div class="alert alert-danger mb-4">{{ error }}</div>
  {% endif %}

  <form id="uploadForm" action="/upload" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="team" value="{{ team }}">

    <!-- ZIP Upload -->
    <div class="mb-4">
      <label class="form-label">ðŸ“¦ Project ZIP File</label>
      <input id="fileInput" type="file" name="file" class="form-control" accept=".zip">
      <small style="color: rgba(255, 255, 255, 0.6); margin-top: 8px; display: block;">
        Upload your complete project as a ZIP file (optional if providing a GitHub link)
      </small>
    </div>

    <!-- OR Divider -->
    <div class="text-center my-3" style="color: #FFD580; font-weight: 600;">
      â€” OR â€”
    </div>

    <!-- GitHub Repo Link -->
    <div class="mb-4">
      <label class="form-label">ðŸ”— Public GitHub Repository URL</label>
      <input id="repoUrlInput" type="url" name="repo_url" class="form-control" placeholder="https://github.com/username/repository">
      <small style="color: rgba(255, 255, 255, 0.6); margin-top: 8px; display: block;">
        Paste a public GitHub repo link (make sure itâ€™s accessible without login)
      </small>
    </div>

    <!-- Upload Progress -->
    <div class="progress mt-4" style="height:28px; display:none;">
      <div id="uploadBar" class="progress-bar" role="progressbar" style="width:0%">
        <span style="font-weight: 600;">0%</span>
      </div>
    </div>

    <div id="statusText" class="mt-3 text-center" style="color: #FFD580; font-weight: 500;"></div>

    <!-- Submit -->
    <button id="submitBtn" class="btn btn-primary w-100 mt-4 py-3" type="submit">
      ðŸš€ Submit Project
    </button>
  </form>

  <script>
    const form = document.getElementById('uploadForm');
    const fileInput = document.getElementById('fileInput');
    const repoUrlInput = document.getElementById('repoUrlInput');

    form.addEventListener('submit', (e) => {
      if (!fileInput.files.length && !repoUrlInput.value.trim()) {
        e.preventDefault();
        alert('Please upload a ZIP file or enter a GitHub repo link.');
      }
    });
  </script>

  <script src="/static/js/upload-progress.js"></script>
</div>
{% endblock %}
